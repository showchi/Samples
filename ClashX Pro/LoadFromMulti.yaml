# 
# Update:2023.03.26
# ------------------
# è§„åˆ™åº“ï¼šhttps://github.com/blackmatrix7/ios_rule_script/tree/master/rule/Clash
# ------------------

# HTTP ä»£ç†ç«¯å£
port: 7890

# SOCKS5 ä»£ç†ç«¯å£
socks-port: 7891

# Linux å’Œ macOS çš„ redir ä»£ç†ç«¯å£ (å¦‚éœ€ä½¿ç”¨æ­¤åŠŸèƒ½ï¼Œè¯·å–æ¶ˆæ³¨é‡Š)
redir-port: 7892

# å…è®¸å±€åŸŸç½‘çš„è¿æ¥ï¼ˆå¯ç”¨æ¥å…±äº«ä»£ç†ï¼‰
allow-lan: false

# è§„åˆ™æ¨¡å¼ï¼šGlobalï¼ˆå…¨å±€ä»£ç†ï¼‰/ Ruleï¼ˆè§„åˆ™ï¼‰ / Script(è…³æœ¬) / Directï¼ˆå…¨å±€ç›´è¿ï¼‰
mode: Rule

# è®¾ç½®æ—¥å¿—è¾“å‡ºçº§åˆ« (é»˜è®¤çº§åˆ«ï¼šsilentï¼Œå³ä¸è¾“å‡ºä»»ä½•å†…å®¹ï¼Œä»¥é¿å…å› æ—¥å¿—å†…å®¹è¿‡å¤§è€Œå¯¼è‡´ç¨‹åºå†…å­˜æº¢å‡ºï¼‰ã€‚
# 5 ä¸ªçº§åˆ«ï¼šsilent / info / warning / error / debugã€‚çº§åˆ«è¶Šé«˜æ—¥å¿—è¾“å‡ºé‡è¶Šå¤§ï¼Œè¶Šå€¾å‘äºè°ƒè¯•ï¼Œè‹¥éœ€è¦è¯·è‡ªè¡Œå¼€å¯ã€‚
log-level: info

# clash çš„ RESTful API
external-controller: '0.0.0.0:9090'


# æ‚¨å¯ä»¥å°†é™æ€ç½‘é¡µèµ„æºï¼ˆå¦‚ clash-dashboardï¼‰æ”¾ç½®åœ¨ä¸€ä¸ªç›®å½•ä¸­ï¼Œclash å°†ä¼šæœåŠ¡äº `${API}/ui`
# å‚æ•°åº”å¡«å†™é…ç½®ç›®å½•çš„ç›¸å¯¹è·¯å¾„æˆ–ç»å¯¹è·¯å¾„ã€‚
# external-ui: folder

# RESTful API çš„å£ä»¤ (å¯é€‰)
secret: ""

# DNS è®¾ç½®

dns:
  enable: true
  ipv6: false
  listen: 127.0.0.1:8853
  enhanced-mode: fake-ip
  nameserver:
    - https://223.5.5.5/dns-query
    - https://223.6.6.6/dns-query
    - https://doh.pub/dns-query
  fake-ip-filter:
    - "*.lan"
    - stun.*.*.*
    - stun.*.*
    - time.windows.com
    - time.nist.gov
    - time.apple.com
    - time.asia.apple.com
    - "*.ntp.org.cn"
    - "*.openwrt.pool.ntp.org"
    - time1.cloud.tencent.com
    - time.ustc.edu.cn
    - pool.ntp.org
    - ntp.ubuntu.com
    - ntp.aliyun.com
    - ntp1.aliyun.com
    - ntp2.aliyun.com
    - ntp3.aliyun.com
    - ntp4.aliyun.com
    - ntp5.aliyun.com
    - ntp6.aliyun.com
    - ntp7.aliyun.com
    - time1.aliyun.com
    - time2.aliyun.com
    - time3.aliyun.com
    - time4.aliyun.com
    - time5.aliyun.com
    - time6.aliyun.com
    - time7.aliyun.com
    - "*.time.edu.cn"
    - time1.apple.com
    - time2.apple.com
    - time3.apple.com
    - time4.apple.com
    - time5.apple.com
    - time6.apple.com
    - time7.apple.com
    - time1.google.com
    - time2.google.com
    - time3.google.com
    - time4.google.com
    - music.163.com
    - "*.music.163.com"
    - "*.126.net"
    - musicapi.taihe.com
    - music.taihe.com
    - songsearch.kugou.com
    - trackercdn.kugou.com
    - "*.kuwo.cn"
    - api-jooxtt.sanook.com
    - api.joox.com
    - joox.com
    - y.qq.com
    - "*.y.qq.com"
    - streamoc.music.tc.qq.com
    - mobileoc.music.tc.qq.com
    - isure.stream.qqmusic.qq.com
    - dl.stream.qqmusic.qq.com
    - aqqmusic.tc.qq.com
    - amobile.music.tc.qq.com
    - "*.xiami.com"
    - "*.music.migu.cn"
    - music.migu.cn
    - "*.msftconnecttest.com"
    - "*.msftncsi.com"
    - localhost.ptlogin2.qq.com
    - "*.*.*.srv.nintendo.net"
    - "*.*.stun.playstation.net"
    - xbox.*.*.microsoft.com
    - "*.ipv6.microsoft.com"
    - "*.*.xboxlive.com"
    - speedtest.cros.wr.pvp.net


# ä»£ç†ç»„ç­–ç•¥
proxy-groups:
  - name: Proxy
    type: select
    use:
      - æœºåœº1
      - æœºåœº2
    proxies:
      - HK
      - TW
      - SG
      - JP
      - US
      - DIRECT 

  - name: MATCH
    type: select
    proxies:
      - Proxy
      - HK
      - TW
      - SG
      - JP
      - US
      - DIRECT 

  - name: Apple
    type: select
    proxies:
      - Proxy
      - HK
      - TW
      - SG
      - JP
      - US
      - DIRECT 

  - name: Amazon
    type: select
    proxies:
      - Proxy
      - HK
      - TW
      - SG
      - JP
      - US
      - DIRECT 

  - name: China
    type: select
    proxies:
      - Proxy
      - HK
      - TW
      - SG
      - JP
      - US
      - DIRECT 

  - name: GitHub
    type: select
    proxies:
      - Proxy
      - HK
      - TW
      - SG
      - JP
      - US
      - DIRECT 

  - name: Google
    type: select
    proxies:
      - Proxy
      - HK
      - TW
      - SG
      - JP
      - US
      - DIRECT 

  - name: Microsoft
    type: select
    proxies:
      - Proxy
      - HK
      - TW
      - SG
      - JP
      - US
      - DIRECT 

  - name: Netflix
    type: select
    proxies:
      - Proxy
      - HK
      - TW
      - SG
      - JP
      - US
      - DIRECT 

  - name: Steam
    type: select
    proxies:
      - Proxy
      - HK
      - TW
      - SG
      - JP
      - US
      - DIRECT 

  - name: Telegram
    type: select
    proxies:
      - Proxy
      - HK
      - TW
      - SG
      - JP
      - US
      - DIRECT 

  - name: Twitter
    type: select
    proxies:
      - Proxy
      - HK
      - TW
      - SG
      - JP
      - US
      - DIRECT 

  - name: YouTube
    type: select
    proxies:
      - Proxy
      - HK
      - TW
      - SG
      - JP
      - US
      - DIRECT 

  - name: PayPal
    type: select
    proxies:
      - Proxy
      - HK
      - TW
      - SG
      - JP
      - US
      - DIRECT 

  - name: HK
    type: select
    use:
      - æœºåœº1HK
      - æœºåœº2HK
    proxies:
      - DIRECT

  - name: TW
    type: select
    use:
      - æœºåœº1TW
      - æœºåœº2TW
    proxies:
      - DIRECT

  - name: SG
    type: select
    use:
      - æœºåœº1SG
      - æœºåœº2SG
    proxies:
      - DIRECT

  - name: JP
    type: select
    use:
      - æœºåœº1JP
      - æœºåœº2JP
    proxies:
      - DIRECT

  - name: US
    type: select
    use:
      - æœºåœº1US
      - æœºåœº2US
    proxies:
      - DIRECT



proxy-providers:
  # å¯å¤šæœºåœºï¼Œä¸‹é¢ä»¥ä¸¤æœºåœºä¸ºä¾‹ï¼š
  # 1ã€å•ç‹¬è®¢é˜…æœºåœº1å’Œæœºåœº2ï¼Œå¹¶æŠŠæœºåœº1å’Œæœºåœº2çš„config nameé‡æ–°è®¾ç½®ä¸ºæœºåœº1å’Œæœºåœº2ï¼ˆåˆ†åŒºæ“ä½œåŸºäºæœ¬åœ°é…ç½®æ–‡ä»¶ï¼Œæ–¹ä¾¿ä¹‹åçš„åˆ†åŒºæ“ä½œï¼‰ï¼Œä¸‹è½½é…ç½®æ–‡ä»¶åˆ°æœ¬åœ°é»˜è®¤æ–‡ä»¶å¤¹ï¼›
  # 2ã€åœ¨ä¸‹é¢æœºåœº1å’Œæœºåœº2ä¸­urlä¸­ï¼Œå¡«å…¥æœºåœº1å’Œæœºåœº2çš„è®¢é˜…åœ°å€ï¼Œä¿å­˜ï¼›
  # 3ã€åˆ‡æ¢åˆ°å½“å‰é…ç½®æ–‡ä»¶ï¼›
  # 4ã€å¤„ç†å¯èƒ½çš„åˆ†åŒºåŒ¹é…é—®é¢˜ï¼›

  æœºåœº1:
    type: http
    url: æœºåœº1 Clashè®¢é˜…é“¾æ¥
    interval: 86400
    path: ./æœºåœº1.yaml
    health-check:
      enable: true
      interval: 600
      # lazy: true
      url: http://www.gstatic.com/generate_204

  # æœºåœº1:
  #   type: file
  #   path: ./æœºåœº1.yaml
  #   health-check:
  #     enable: true
  #     url: http://www.gstatic.com/generate_204
  #     interval: 300

  æœºåœº2:
    type: http
    url: æœºåœº2 Clashè®¢é˜…é“¾æ¥
    interval: 86400
    path: ./æœºåœº2.yaml
    health-check:
      enable: true
      interval: 600
      # lazy: true
      url: http://www.gstatic.com/generate_204

  æœºåœº1HK:
    type: file
    path: ./æœºåœº1.yaml
    filter: 'ğŸ‡­ğŸ‡°|HK|é¦™æ¸¯|æ¸¯|Hongkong'
    health-check:
      enable: true
      url: http://www.gstatic.com/generate_204
      interval: 300

  æœºåœº2HK:
    type: file
    path: ./æœºåœº2.yaml
    filter: 'ğŸ‡­ğŸ‡°|HK|é¦™æ¸¯|æ¸¯|Hongkong'
    health-check:
      enable: true
      url: http://www.gstatic.com/generate_204
      interval: 300

  æœºåœº1TW:
    type: file
    path: ./æœºåœº1.yaml
    filter: 'å°|å°æ¹¾|TW|Taiwan'
    health-check:
      enable: true
      url: http://www.gstatic.com/generate_204
      interval: 300

  æœºåœº2TW:
    type: file
    path: ./æœºåœº2.yaml
    filter: 'å°|å°æ¹¾|TW|Taiwan'
    health-check:
      enable: true
      url: http://www.gstatic.com/generate_204
      interval: 300

  æœºåœº1SG:
    type: file
    path: ./æœºåœº1.yaml
    filter: 'ğŸ‡¸ğŸ‡¬|ç‹®åŸ|æ–°|æ–°åŠ å¡|SG'
    health-check:
      enable: true
      url: http://www.gstatic.com/generate_204
      interval: 300

  æœºåœº2SG:
    type: file
    path: ./æœºåœº2.yaml
    filter: 'ğŸ‡¸ğŸ‡¬|ç‹®åŸ|æ–°|æ–°åŠ å¡|SG'
    health-check:
      enable: true
      url: http://www.gstatic.com/generate_204
      interval: 300

  æœºåœº1JP:
    type: file
    path: ./æœºåœº1.yaml
    filter: 'ğŸ‡¯ğŸ‡µ|æ—¥|æ—¥æœ¬|ä¸œäº¬|å¤§é˜ª|æ³‰æ—¥|åŸ¼ç‰|æ²ªæ—¥|æ·±æ—¥|JP'
    health-check:
      enable: true
      url: http://www.gstatic.com/generate_204
      interval: 300

  æœºåœº2JP:
    type: file
    path: ./æœºåœº2.yaml
    filter: 'ğŸ‡¯ğŸ‡µ|æ—¥|æ—¥æœ¬|ä¸œäº¬|å¤§é˜ª|æ³‰æ—¥|åŸ¼ç‰|æ²ªæ—¥|æ·±æ—¥|JP'
    health-check:
      enable: true
      url: http://www.gstatic.com/generate_204
      interval: 300

  æœºåœº1US:
    type: file
    path: ./æœºåœº1.yaml
    filter: 'ğŸ‡ºğŸ‡¸|ç¾|ç¾å›½|æ³¢ç‰¹å…°|è¾¾æ‹‰æ–¯|ä¿„å‹’å†ˆ|å‡¤å‡°åŸ|è´¹åˆ©è’™|ç¡…è°·|æ‹‰æ–¯ç»´åŠ æ–¯|æ´›æ‰çŸ¶|åœ£ä½•å¡|åœ£å…‹æ‹‰æ‹‰|è¥¿é›…å›¾|èŠåŠ å“¥|US|us'
    health-check:
      enable: true
      url: http://www.gstatic.com/generate_204
      interval: 300
      
  æœºåœº2US:
    type: file
    path: ./æœºåœº2.yaml
    filter: 'ğŸ‡ºğŸ‡¸|ç¾|ç¾å›½|æ³¢ç‰¹å…°|è¾¾æ‹‰æ–¯|ä¿„å‹’å†ˆ|å‡¤å‡°åŸ|è´¹åˆ©è’™|ç¡…è°·|æ‹‰æ–¯ç»´åŠ æ–¯|æ´›æ‰çŸ¶|åœ£ä½•å¡|åœ£å…‹æ‹‰æ‹‰|è¥¿é›…å›¾|èŠåŠ å“¥|US|us'
    health-check:
      enable: true
      url: http://www.gstatic.com/generate_204
      interval: 300

# åˆ†æµè§„åˆ™  
rules:
  - RULE-SET,AdBlock,REJECT
  - RULE-SET,Apple,Apple
  - RULE-SET,Amazon,Amazon
  - RULE-SET,GitHub,GitHub
  - RULE-SET,Google,Google
  - RULE-SET,Microsoft,Microsoft
  - RULE-SET,Netflix,Netflix 
  - RULE-SET,Steam,Steam
  - RULE-SET,Telegram,Telegram 
  - RULE-SET,Twitter,Twitter 
  - RULE-SET,YouTube,YouTube 
  - RULE-SET,PayPal,PayPal
  - RULE-SET,Proxy,Proxy
  - DOMAIN-SUFFIX,live.cn,China
  - GEOIP,CN,DIRECT
  - MATCH,MATCH

rule-providers:
  AdBlock: {type: http, behavior: classical, path: ./Filter/AdBlock, url: https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Advertising/Advertising_Classical.yaml, interval: 3600}
  Apple: {type: http, behavior: classical, path: ./Filter/Apple, url: https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Apple/Apple.yaml, interval: 3600}
  Amazon: {type: http, behavior: classical, path: ./Filter/Amazon, url: https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Amazon/Amazon.yaml, interval: 3600}
  China: {type: http, behavior: classical, path: ./Filter/China, url: https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/China/China_Classical.yaml, interval: 3600}
  GitHub: {type: http, behavior: classical, path: ./Filter/GitHub, url: https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/GitHub/GitHub.yaml, interval: 3600}
  Google: {type: http, behavior: classical, path: ./Filter/Google, url: https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Google/Google.yaml, interval: 3600}
  Microsoft: {type: http, behavior: classical, path: ./Filter/Microsoft, url: https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Microsoft/Microsoft.yaml, interval: 3600}
  Netflix: {type: http, behavior: classical, path: ./Filter/Netflix, url: https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Netflix/Netflix.yaml, interval: 3600} 
  Steam: {type: http, behavior: classical, path: ./Filter/Steam, url: https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Steam/Steam.yaml, interval: 3600}
  Telegram: {type: http, behavior: classical, path: ./Filter/Telegram, url: https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Telegram/Telegram.yaml, interval: 3600}
  Twitter: {type: http, behavior: classical, path: ./Filter/Twitter, url: https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Twitter/Twitter.yaml, interval: 3600}
  YouTube: {type: http, behavior: classical, path: ./Filter/YouTube, url: https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/YouTube/YouTube.yaml, interval: 3600}
  PayPal: {type: http, behavior: classical, path: ./Filter/PayPal, url: https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/PayPal/PayPal.yaml, interval: 3600}
  Proxy: {type: http, behavior: classical, path: ./Filter/Proxy, url: https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Proxy/Proxy_Classical.yaml, interval: 3600}
