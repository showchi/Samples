# 
# Update:2023.03.27
# ------------------
# è§„åˆ™åº“ï¼šhttps://github.com/blackmatrix7/ios_rule_script/tree/master/rule/Clash
# ------------------

# HTTP ä»£ç†ç«¯å£
port: 7890

# SOCKS5 ä»£ç†ç«¯å£
socks-port: 7891

# Linux å’Œ macOS çš„ redir ä»£ç†ç«¯å£ (å¦‚éœ€ä½¿ç”¨æ­¤åŠŸèƒ½ï¼Œè¯·å–æ¶ˆæ³¨é‡Š)
redir-port: 7892

# HTTP(S) and SOCKS5 å…±ç”¨ç«¯å£
mixed-port: 7890

# å…è®¸å±€åŸŸç½‘çš„è¿æ¥ï¼ˆå¯ç”¨æ¥å…±äº«ä»£ç†ï¼‰
allow-lan: false

# è§„åˆ™æ¨¡å¼ï¼šglobalï¼ˆå…¨å±€ä»£ç†ï¼‰/ ruleï¼ˆè§„åˆ™ï¼‰ / script(è…³æœ¬) / directï¼ˆå…¨å±€ç›´è¿ï¼‰
mode: rule

# è®¾ç½®æ—¥å¿—è¾“å‡ºçº§åˆ« (é»˜è®¤çº§åˆ«ï¼šsilentï¼Œå³ä¸è¾“å‡ºä»»ä½•å†…å®¹ï¼Œä»¥é¿å…å› æ—¥å¿—å†…å®¹è¿‡å¤§è€Œå¯¼è‡´ç¨‹åºå†…å­˜æº¢å‡ºï¼‰ã€‚
# 5 ä¸ªçº§åˆ«ï¼šsilent / info / warning / error / debugã€‚çº§åˆ«è¶Šé«˜æ—¥å¿—è¾“å‡ºé‡è¶Šå¤§ï¼Œè¶Šå€¾å‘äºè°ƒè¯•ï¼Œè‹¥éœ€è¦è¯·è‡ªè¡Œå¼€å¯ã€‚
log-level: info

# clash çš„ RESTful API
external-controller: 0.0.0.0:9090


# æ‚¨å¯ä»¥å°†é™æ€ç½‘é¡µèµ„æºï¼ˆå¦‚ clash-dashboardï¼‰æ”¾ç½®åœ¨ä¸€ä¸ªç›®å½•ä¸­ï¼Œclash å°†ä¼šæœåŠ¡äº `${API}/ui`
# å‚æ•°åº”å¡«å†™é…ç½®ç›®å½•çš„ç›¸å¯¹è·¯å¾„æˆ–ç»å¯¹è·¯å¾„ã€‚
# external-ui: folder

# RESTful API çš„å£ä»¤ (å¯é€‰)
secret: ""

# DNS è®¾ç½®

dns:
  enable: true
  listen: 0.0.0.0:53
  default-nameserver:
    - 223.5.5.5
    - 8.8.4.4
  ipv6: false
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16 # Fake IP åœ°å€æ±  (CIDR å½¢å¼)
  fake-ip-filter:
    - "*.lan"
    - "*.localdomain"
    - "*.example"
    - "*.invalid"
    - "*.localhost"
    - "*.test"
    - "*.local"
    - "*.home.arpa"
    - time.*.com
    - time.*.gov
    - time.*.edu.cn
    - time.*.apple.com
    - time1.*.com
    - time2.*.com
    - time3.*.com
    - time4.*.com
    - time5.*.com
    - time6.*.com
    - time7.*.com
    - ntp.*.com
    - ntp1.*.com
    - ntp2.*.com
    - ntp3.*.com
    - ntp4.*.com
    - ntp5.*.com
    - ntp6.*.com
    - ntp7.*.com
    - "*.time.edu.cn"
    - "*.ntp.org.cn"
    - +.pool.ntp.org
    - time1.cloud.tencent.com
    - music.163.com
    - "*.music.163.com"
    - "*.126.net"
    - musicapi.taihe.com
    - music.taihe.com
    - songsearch.kugou.com
    - trackercdn.kugou.com
    - "*.kuwo.cn"
    - api-jooxtt.sanook.com
    - api.joox.com
    - joox.com
    - y.qq.com
    - "*.y.qq.com"
    - streamoc.music.tc.qq.com
    - mobileoc.music.tc.qq.com
    - isure.stream.qqmusic.qq.com
    - dl.stream.qqmusic.qq.com
    - aqqmusic.tc.qq.com
    - amobile.music.tc.qq.com
    - "*.xiami.com"
    - "*.music.migu.cn"
    - music.migu.cn
    - +.msftconnecttest.com
    - +.msftncsi.com
    - msftconnecttest.com
    - msftncsi.com
    - localhost.ptlogin2.qq.com
    - localhost.sec.qq.com
    - +.srv.nintendo.net
    - +.stun.playstation.net
    - xbox.*.microsoft.com
    - xnotify.xboxlive.com
    - +.ipv6.microsoft.com
    - +.battlenet.com.cn
    - +.wotgame.cn
    - +.wggames.cn
    - +.wowsgame.cn
    - +.wargaming.net
    - proxy.golang.org
    - stun.*.*
    - stun.*.*.*
    - +.stun.*.*
    - +.stun.*.*.*
    - +.stun.*.*.*.*
    - heartbeat.belkin.com
    - "*.linksys.com"
    - "*.linksyssmartwifi.com"
    - "*.router.asus.com"
    - mesu.apple.com
    - swscan.apple.com
    - swquery.apple.com
    - swdownload.apple.com
    - swcdn.apple.com
    - swdist.apple.com
    - lens.l.google.com
    - stun.l.google.com
    - "*.square-enix.com"
    - "*.finalfantasyxiv.com"
    - "*.ffxiv.com"
    - "*.ff14.sdo.com"
    - ff.dorado.sdo.com
    - "*.mcdn.bilivideo.cn"
    - +.media.dssott.com
    - +.pvp.net
  nameserver:
    - 114.114.114.114
    - tls://223.5.5.5:853
    - tls://223.6.6.6:853
    - tls://1.12.12.12
    - tls://120.53.53.53
  fallback:
    - https://1.0.0.1/dns-query
    - https://public.dns.iij.jp/dns-query
    - tls://8.8.4.4:853
  fallback-filter:
    geoip: false
    ipcidr:
      - 240.0.0.0/4
      - 0.0.0.0/32
      - 127.0.0.1/32
    domain:
      - +.facebook.com
      - +.twitter.com
      - +.google.com
      - +.googleapis.com
      - +.google.cn
      - +.googleapis.cn
      - +.xn--ngstr-lra8j.com
      - +.googlevideo.com
      - +.gvt1.com
      - +.gmail.com
      - +.youtube.com
      - +.youtu.be
      - +.gvt0.com
      - +.gvt2.com
      - +.gvt3.com
      - +.gstatic.com
      - +.265.com
      - +.2mdn.net
      - +.app-measurement.com
      - +.c.admob.com
      - +.clickserve.dartsearch.net
      - +.crl.pki.goog
      - +.doubleclick.net
      - +.firebase-settings.crashlytics.com
      - +.google-analytics.com
      - +.googleadservices.com
      - +.googleanalytics.com
      - +.googleoptimize.com
      - +.googlesyndication.com
      - +.googletagmanager.com
      - +.googletagservices.com


# ä»£ç†ç»„ç­–ç•¥
proxy-groups:
  - name: Proxy
    type: select
    use:
      - æœºåœº1
      - æœºåœº2
    proxies:
      - ğŸ‡­ğŸ‡°
      - TW
      - ğŸ‡¸ğŸ‡¬
      - ğŸ‡¯ğŸ‡µ
      - ğŸ‡ºğŸ‡¸
      - DIRECT 

  - name: MATCH
    type: select
    proxies:
      - Proxy
      - ğŸ‡­ğŸ‡°
      - TW
      - ğŸ‡¸ğŸ‡¬
      - ğŸ‡¯ğŸ‡µ
      - ğŸ‡ºğŸ‡¸
      - DIRECT 

  - name: Apple
    type: select
    proxies:
      - Proxy
      - ğŸ‡­ğŸ‡°
      - TW
      - ğŸ‡¸ğŸ‡¬
      - ğŸ‡¯ğŸ‡µ
      - ğŸ‡ºğŸ‡¸
      - DIRECT 

  - name: Amazon
    type: select
    proxies:
      - Proxy
      - ğŸ‡­ğŸ‡°
      - TW
      - ğŸ‡¸ğŸ‡¬
      - ğŸ‡¯ğŸ‡µ
      - ğŸ‡ºğŸ‡¸
      - DIRECT 

  - name: China
    type: select
    proxies:
      - Proxy
      - ğŸ‡­ğŸ‡°
      - TW
      - ğŸ‡¸ğŸ‡¬
      - ğŸ‡¯ğŸ‡µ
      - ğŸ‡ºğŸ‡¸
      - DIRECT 

  - name: GitHub
    type: select
    proxies:
      - Proxy
      - ğŸ‡­ğŸ‡°
      - TW
      - ğŸ‡¸ğŸ‡¬
      - ğŸ‡¯ğŸ‡µ
      - ğŸ‡ºğŸ‡¸
      - DIRECT 

  - name: Google
    type: select
    proxies:
      - Proxy
      - ğŸ‡­ğŸ‡°
      - TW
      - ğŸ‡¸ğŸ‡¬
      - ğŸ‡¯ğŸ‡µ
      - ğŸ‡ºğŸ‡¸
      - DIRECT 

  - name: Microsoft
    type: select
    proxies:
      - Proxy
      - ğŸ‡­ğŸ‡°
      - TW
      - ğŸ‡¸ğŸ‡¬
      - ğŸ‡¯ğŸ‡µ
      - ğŸ‡ºğŸ‡¸
      - DIRECT 

  - name: Netflix
    type: select
    proxies:
      - Proxy
      - ğŸ‡­ğŸ‡°
      - TW
      - ğŸ‡¸ğŸ‡¬
      - ğŸ‡¯ğŸ‡µ
      - ğŸ‡ºğŸ‡¸
      - DIRECT 

  - name: Steam
    type: select
    proxies:
      - Proxy
      - ğŸ‡­ğŸ‡°
      - TW
      - ğŸ‡¸ğŸ‡¬
      - ğŸ‡¯ğŸ‡µ
      - ğŸ‡ºğŸ‡¸
      - DIRECT 

  - name: ChatGPT
    type: select
    proxies:
      - Proxy
      - ğŸ‡­ğŸ‡°
      - TW
      - ğŸ‡¸ğŸ‡¬
      - ğŸ‡¯ğŸ‡µ
      - ğŸ‡ºğŸ‡¸
      - DIRECT

  - name: Telegram
    type: select
    proxies:
      - Proxy
      - ğŸ‡­ğŸ‡°
      - TW
      - ğŸ‡¸ğŸ‡¬
      - ğŸ‡¯ğŸ‡µ
      - ğŸ‡ºğŸ‡¸
      - DIRECT 

  - name: Twitter
    type: select
    proxies:
      - Proxy
      - ğŸ‡­ğŸ‡°
      - TW
      - ğŸ‡¸ğŸ‡¬
      - ğŸ‡¯ğŸ‡µ
      - ğŸ‡ºğŸ‡¸
      - DIRECT 

  - name: YouTube
    type: select
    proxies:
      - Proxy
      - ğŸ‡­ğŸ‡°
      - TW
      - ğŸ‡¸ğŸ‡¬
      - ğŸ‡¯ğŸ‡µ
      - ğŸ‡ºğŸ‡¸
      - DIRECT 

  - name: PayPal
    type: select
    proxies:
      - Proxy
      - ğŸ‡­ğŸ‡°
      - TW
      - ğŸ‡¸ğŸ‡¬
      - ğŸ‡¯ğŸ‡µ
      - ğŸ‡ºğŸ‡¸
      - DIRECT 

  - name: ğŸ‡­ğŸ‡°
    type: select
    use:
      - æœºåœº1ğŸ‡­ğŸ‡°
      - æœºåœº2ğŸ‡­ğŸ‡°
    proxies:
      - DIRECT

  - name: TW
    type: select
    use:
      - æœºåœº1TW
      - æœºåœº2TW
    proxies:
      - DIRECT

  - name: ğŸ‡¸ğŸ‡¬
    type: select
    use:
      - æœºåœº1ğŸ‡¸ğŸ‡¬
      - æœºåœº2ğŸ‡¸ğŸ‡¬
    proxies:
      - DIRECT

  - name: ğŸ‡¯ğŸ‡µ
    type: select
    use:
      - æœºåœº1ğŸ‡¯ğŸ‡µ
      - æœºåœº2ğŸ‡¯ğŸ‡µ
    proxies:
      - DIRECT

  - name: ğŸ‡ºğŸ‡¸
    type: select
    use:
      - æœºåœº1ğŸ‡ºğŸ‡¸
      - æœºåœº2ğŸ‡ºğŸ‡¸
    proxies:
      - DIRECT



proxy-providers:
  # å¯å¤šæœºåœºï¼Œä¸‹é¢ä»¥ä¸¤æœºåœºä¸ºä¾‹ï¼š
  # 1ã€å•ç‹¬è®¢é˜…æœºåœº1å’Œæœºåœº2ï¼Œå¹¶æŠŠæœºåœº1å’Œæœºåœº2çš„config nameé‡æ–°è®¾ç½®ä¸ºæœºåœº1å’Œæœºåœº2ï¼ˆåˆ†åŒºæ“ä½œåŸºäºæœ¬åœ°é…ç½®æ–‡ä»¶ï¼Œæ–¹ä¾¿ä¹‹åçš„åˆ†åŒºæ“ä½œï¼‰ï¼Œä¸‹è½½é…ç½®æ–‡ä»¶åˆ°æœ¬åœ°é»˜è®¤æ–‡ä»¶å¤¹ï¼›
  # 2ã€åœ¨ä¸‹é¢æœºåœº1å’Œæœºåœº2ä¸­urlä¸­ï¼Œå¡«å…¥æœºåœº1å’Œæœºåœº2çš„è®¢é˜…åœ°å€ï¼Œä¿å­˜ï¼›
  # 3ã€åˆ‡æ¢åˆ°å½“å‰é…ç½®æ–‡ä»¶ï¼›
  # 4ã€å¤„ç†å¯èƒ½çš„åˆ†åŒºåŒ¹é…é—®é¢˜ï¼›

  æœºåœº1:
    type: http
    url: æœºåœº1 Clashè®¢é˜…é“¾æ¥
    interval: 86400
    path: ./æœºåœº1.yaml
    health-check:
      enable: true
      interval: 600
      # lazy: true
      url: http://www.gstatic.com/generate_204

  # æœºåœº1:
  #   type: file
  #   path: ./æœºåœº1.yaml
  #   health-check:
  #     enable: true
  #     url: http://www.gstatic.com/generate_204
  #     interval: 300

  æœºåœº2:
    type: http
    url: æœºåœº2 Clashè®¢é˜…é“¾æ¥
    interval: 86400
    path: ./æœºåœº2.yaml
    health-check:
      enable: true
      interval: 600
      # lazy: true
      url: http://www.gstatic.com/generate_204

  æœºåœº1ğŸ‡­ğŸ‡°:
    type: file
    path: ./æœºåœº1.yaml
    filter: 'ğŸ‡­ğŸ‡°|HK|é¦™æ¸¯|æ¸¯|Hongkong'
    health-check:
      enable: true
      url: http://www.gstatic.com/generate_204
      interval: 300

  æœºåœº2ğŸ‡­ğŸ‡°:
    type: file
    path: ./æœºåœº2.yaml
    filter: 'ğŸ‡­ğŸ‡°|HK|é¦™æ¸¯|æ¸¯|Hongkong'
    health-check:
      enable: true
      url: http://www.gstatic.com/generate_204
      interval: 300

  æœºåœº1TW:
    type: file
    path: ./æœºåœº1.yaml
    filter: 'å°|å°æ¹¾|TW|Taiwan'
    health-check:
      enable: true
      url: http://www.gstatic.com/generate_204
      interval: 300

  æœºåœº2TW:
    type: file
    path: ./æœºåœº2.yaml
    filter: 'å°|å°æ¹¾|TW|Taiwan'
    health-check:
      enable: true
      url: http://www.gstatic.com/generate_204
      interval: 300

  æœºåœº1ğŸ‡¸ğŸ‡¬:
    type: file
    path: ./æœºåœº1.yaml
    filter: 'ğŸ‡¸ğŸ‡¬|ç‹®åŸ|æ–°|æ–°åŠ å¡|SG'
    health-check:
      enable: true
      url: http://www.gstatic.com/generate_204
      interval: 300

  æœºåœº2ğŸ‡¸ğŸ‡¬:
    type: file
    path: ./æœºåœº2.yaml
    filter: 'ğŸ‡¸ğŸ‡¬|ç‹®åŸ|æ–°|æ–°åŠ å¡|SG'
    health-check:
      enable: true
      url: http://www.gstatic.com/generate_204
      interval: 300

  æœºåœº1ğŸ‡¯ğŸ‡µ:
    type: file
    path: ./æœºåœº1.yaml
    filter: 'ğŸ‡¯ğŸ‡µ|æ—¥|æ—¥æœ¬|ä¸œäº¬|å¤§é˜ª|æ³‰æ—¥|åŸ¼ç‰|æ²ªæ—¥|æ·±æ—¥|JP'
    health-check:
      enable: true
      url: http://www.gstatic.com/generate_204
      interval: 300

  æœºåœº2ğŸ‡¯ğŸ‡µ:
    type: file
    path: ./æœºåœº2.yaml
    filter: 'ğŸ‡¯ğŸ‡µ|æ—¥|æ—¥æœ¬|ä¸œäº¬|å¤§é˜ª|æ³‰æ—¥|åŸ¼ç‰|æ²ªæ—¥|æ·±æ—¥|JP'
    health-check:
      enable: true
      url: http://www.gstatic.com/generate_204
      interval: 300

  æœºåœº1ğŸ‡ºğŸ‡¸:
    type: file
    path: ./æœºåœº1.yaml
    filter: 'ğŸ‡ºğŸ‡¸|ç¾|ç¾å›½|æ³¢ç‰¹å…°|è¾¾æ‹‰æ–¯|ä¿„å‹’å†ˆ|å‡¤å‡°åŸ|è´¹åˆ©è’™|ç¡…è°·|æ‹‰æ–¯ç»´åŠ æ–¯|æ´›æ‰çŸ¶|åœ£ä½•å¡|åœ£å…‹æ‹‰æ‹‰|è¥¿é›…å›¾|èŠåŠ å“¥|US|us'
    health-check:
      enable: true
      url: http://www.gstatic.com/generate_204
      interval: 300
      
  æœºåœº2ğŸ‡ºğŸ‡¸:
    type: file
    path: ./æœºåœº2.yaml
    filter: 'ğŸ‡ºğŸ‡¸|ç¾|ç¾å›½|æ³¢ç‰¹å…°|è¾¾æ‹‰æ–¯|ä¿„å‹’å†ˆ|å‡¤å‡°åŸ|è´¹åˆ©è’™|ç¡…è°·|æ‹‰æ–¯ç»´åŠ æ–¯|æ´›æ‰çŸ¶|åœ£ä½•å¡|åœ£å…‹æ‹‰æ‹‰|è¥¿é›…å›¾|èŠåŠ å“¥|US|us'
    health-check:
      enable: true
      url: http://www.gstatic.com/generate_204
      interval: 300

# åˆ†æµè§„åˆ™  
rules:
  - RULE-SET,AdBlock,REJECT
  - RULE-SET,ChatGPT,ChatGPT
  - RULE-SET,Apple,Apple
  - RULE-SET,Amazon,Amazon
  - RULE-SET,GitHub,GitHub
  - RULE-SET,Google,Google
  - DOMAIN-KEYWORD,bing,Microsoft
  - RULE-SET,Microsoft,Microsoft
  - RULE-SET,Netflix,Netflix 
  - RULE-SET,Steam,Steam
  - RULE-SET,Telegram,Telegram 
  - RULE-SET,Twitter,Twitter 
  - RULE-SET,YouTube,YouTube 
  - RULE-SET,PayPal,PayPal
  - RULE-SET,Proxy,Proxy
  - DOMAIN-SUFFIX,live.cn,China
  - GEOIP,CN,DIRECT
  - MATCH,MATCH

rule-providers:
  ChatGPT: {type: http, behavior: classical, path: ./Filter/ChatGPT, url: https://ghproxy.com/https://raw.githubusercontent.com/showchi/Samples/main/ClashForWindows/ChatGPT.yaml, interval: 86400}
  AdBlock: {type: http, behavior: classical, path: ./Filter/AdBlock, url: https://ghproxy.com/https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Advertising/Advertising_Classical.yaml, interval: 86400}
  Apple: {type: http, behavior: classical, path: ./Filter/Apple, url: https://ghproxy.com/https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Apple/Apple.yaml, interval: 86400}
  Amazon: {type: http, behavior: classical, path: ./Filter/Amazon, url: https://ghproxy.com/https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Amazon/Amazon.yaml, interval: 86400}
  China: {type: http, behavior: classical, path: ./Filter/China, url: https://ghproxy.com/https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/China/China_Classical.yaml, interval: 86400}
  GitHub: {type: http, behavior: classical, path: ./Filter/GitHub, url: https://ghproxy.com/https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/GitHub/GitHub.yaml, interval: 86400}
  Google: {type: http, behavior: classical, path: ./Filter/Google, url: https://ghproxy.com/https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Google/Google.yaml, interval: 86400}
  Microsoft: {type: http, behavior: classical, path: ./Filter/Microsoft, url: https://ghproxy.com/https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Microsoft/Microsoft.yaml, interval: 86400}
  Netflix: {type: http, behavior: classical, path: ./Filter/Netflix, url: https://ghproxy.com/https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Netflix/Netflix.yaml, interval: 86400} 
  Steam: {type: http, behavior: classical, path: ./Filter/Steam, url: https://ghproxy.com/https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Steam/Steam.yaml, interval: 86400}
  Telegram: {type: http, behavior: classical, path: ./Filter/Telegram, url: https://ghproxy.com/https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Telegram/Telegram.yaml, interval: 86400}
  Twitter: {type: http, behavior: classical, path: ./Filter/Twitter, url: https://ghproxy.com/https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Twitter/Twitter.yaml, interval: 86400}
  YouTube: {type: http, behavior: classical, path: ./Filter/YouTube, url: https://ghproxy.com/https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/YouTube/YouTube.yaml, interval: 86400}
  PayPal: {type: http, behavior: classical, path: ./Filter/PayPal, url: https://ghproxy.com/https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/PayPal/PayPal.yaml, interval: 86400}
  Proxy: {type: http, behavior: classical, path: ./Filter/Proxy, url: https://ghproxy.com/https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Proxy/Proxy_Classical.yaml, interval: 86400}
